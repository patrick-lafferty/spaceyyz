!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";angular.module("spaceyyz",["ui.bootstrap","ui.router"]),n(2),n(3),n(13),n(19),n(30),n(25),n(5),n(23),n(9),n(22),n(8),n(1),n(31),n(18),n(21),n(20),n(17),n(16),n(15),n(12),n(14),n(11),n(10),n(7),n(6),n(4),n(29),n(28),n(27),n(26),n(24)},function(e,t){"use strict";!function(){function e(){}angular.module("spaceyyz").component("about",{templateUrl:"src/about.html",controller:e})}()},function(e,t){"use strict";!function(){angular.module("spaceyyz").config(["$stateProvider",function(e){var t=[{name:"home",url:"/home",component:"home"},{name:"orderNew",url:"/launchVehicles/orderNew",component:"orderLaunchVehicle"},{name:"vehicleOrderDetail",url:"/launchVehicles/orderNew/:name",component:"vehicleOrderDetail"},{name:"orderConfirmation",url:"/launchVehicles/order/:orderNumber",component:"orderConfirmation",params:{order:{},hiddenParam:"YES"}},{name:"development",url:"/launchVehicles/development",component:"vehicleDevelopment"},{name:"completed",url:"/launchVehicles/inventory",component:"vehicleInventory"},{name:"config",url:"/launchVehicles/config",component:"configVehicle"},{name:"schedule",url:"/flight/schedule",component:"scheduleFlight"},{name:"progress",url:"/flight/progress",component:"flightProgress"},{name:"flightDetails",url:"/flight/details/:missionName",component:"flightDetails",params:{flight:{},hiddenParam:"YES"}},{name:"spaceportStatus",url:"/spaceports/status",component:"spaceportStatus",params:{continent:{},hiddenParam:"YES"}},{name:"configureSpaceport",url:"/spaceports/configure",component:"configureSpaceport"},{name:"researchEngine",url:"/research/engine",component:"researchEngine"},{name:"designStage",url:"/research/stage",component:"designStage"}],n=[{name:"about",url:"/about",component:"about"},{name:"login",url:"/login",component:"login",params:{redirectTo:"auth.home"}}],i={name:"auth",template:"<ui-view></ui-view>"};e.state(i),t.forEach(function(t){t.parent=i,e.state(t)}),n.forEach(function(t){e.state(t)})}]),angular.module("spaceyyz").run(["$state","$transitions",function(e,t){t.onBefore({to:"login"},function(e){var t=firebase.auth().currentUser;return!t||e.router.stateService.target("auth.home")}),t.onBefore({to:"auth.**"},function(e){var t=firebase.auth().currentUser;if(t)return!0;for(var n in localStorage)if(n.startsWith("firebase:authUser"))return!0;return e.router.stateService.target("login",{redirectTo:e.$to().name},{reload:!0})})}])}()},function(e,t){"use strict";!function(){angular.module("spaceyyz").filter("groupBy",function(){return function(e,t){var n={};if("undefined"==typeof e)return n;for(var i=0;i<e.length;i++){var a=e[i],r=a[t];"undefined"==typeof n[r]&&(n[r]={name:r,spaceports:[]}),n[r].spaceports.push(a)}return n}})}()},function(e,t){"use strict";!function(){function e(e,t,n,i){function a(){c.flight.launch.date<=Date.now&&(c.flight.launched=!0),c.flight.status={velocity:0,altitude:0}}function r(){for(var e=0,t=0;t<m.length&&c.elapsedTime>=m[t]*c.maxFlightTime;t++)e++;return e}function o(){c.elapsedTime>=c.maxFlightTime&&window.clearInterval(d),c.elapsedTime+=c.maxFlightTime/c.animLength,c.flight.status.velocity=40*c.elapsedTime,c.flight.status.altitude++;var e=r();if(e>c.currentStage){c.currentStage=e,c.flight.log=[];for(var t=0;t<e;t++)for(var a=0;a<c.events[t].length;a++)c.flight.log.push(c.events[t][a])}n(function(){i.$apply()})}var c=this;this.flight=e.flight,this.playbackSpeed="Realtime","undefined"==typeof this.flight.mission?t.getFlight(e.missionName).then(function(e){c.flight=e,c.flight.launched=!1,a(),n(function(){i.$apply()})}):(c.flight.launched=!1,a());var s=document.getElementById("ascentPath"),l=document.getElementById("point"),u=document.querySelector("svg"),h=u.createSVGPoint();s.addEventListener("mousedown",function(e){h.x=e.clientX,h.y=e.clientY;var t=h.matrixTransform(u.getScreenCTM().inverse());l.setAttribute("cx",t.x),l.setAttribute("cy",t.y),console.log(t.x+", "+t.y)}),c.animLength=5;var m=[.022,.167,.4,.55,.954];this.changePlaybackSpeed=function(){switch(c.playbackSpeed){case"Realtime":c.animLength=600;break;case"10x":c.animLength=60}document.querySelectorAll("circle.futureFlightEvent").forEach(function(e,t){e.style.setProperty("animation-delay",m[t]*c.animLength+"s")}),document.querySelectorAll("text.futureFlightEvent").forEach(function(e,t){e.style.setProperty("animation-delay",m[t]*c.animLength+"s")}),s.style.setProperty("animation-duration",c.animLength+"s")},this.changePlaybackSpeed();var d=window.setInterval(o,1e3);c.events=[["Ignition","Liftoff","Roll program"],["Maximum Dynamic Pressure"],["Stage 1 Sep","Stage 2 Ignition"],["Fairing sep"],["Stage 2 shutdown"]],this.elapsedTime=0,this.maxFlightTime=600,c.currentStage=-1}angular.module("spaceyyz").component("flightDetails",{templateUrl:"src/flight/details.html",controller:e}),e.$inject=["$stateParams","flightFactory","$timeout","$scope"]}()},function(e,t){"use strict";!function(){function e(){var e=this;return this.scheduleFlight=function(e){e.mission.destination.primary=e.mission.destination.primary.name,e.mission.vehicle=e.mission.vehicle.key,e.launch.dateTimestamp=e.launch.date.getTime(),firebase.database().ref().child("flights").push(e)},this.getFlights=function(){return firebase.database().ref().child("flights").once("value").then(function(e){var t=e.val(),n=[];return Object.keys(t).forEach(function(e){var i=t[e];i.mission.name=i.mission.id,n.push(i)}),n})},this.getFlight=function(t){return e.getFlights().then(function(e){var n=e.findIndex(function(e){return e.mission.name===t});return e[n]})},this}angular.module("spaceyyz").factory("flightFactory",e)}()},function(e,t){"use strict";!function(){function e(e,t,n){var i=this;this.flights=[],e.getFlights().then(function(e){i.flights=e,t(function(){n.$apply()})})}angular.module("spaceyyz").component("flightProgress",{templateUrl:"src/flight/progress.html",controller:e}),e.$inject=["flightFactory","$timeout","$scope"]}()},function(e,t){"use strict";!function(){function e(e,t,n,i,a,r,o){function c(){n(function(){i.$apply()})}this.payload=0;var s=this;this.solarSystem=r,this.filter=function(e){return e.capacity>=Number(s.payload)},this.vehicles={all:[]},this.selectedVehicle={},this.datePicker={isOpen:!1},this.flight={mission:{id:"",payload:0,destination:{primary:s.solarSystem.planets[2],secondary:"None"},type:"orbit",vehicle:{}},launch:{date:new Date,site:{}}},this.datePickerOptions={minDate:new Date},this.spaceports={},this.continent="northAmerica",this.spaceport={},this.selectedValidSpaceport=!1,this.filtername="",this.spaceportFilter=function(e){return e.name.toLowerCase().includes(s.filtername.toLowerCase())},this.isopen=!1,this.spaceportSelected=function(e){s.spaceport=e,s.selectedValidSpaceport=!0,s.filtername=e.name},this.filterChanged=function(){s.isopen=!0,s.spaceport={},s.selectedValidSpaceport=!1;for(var e=0;e<s.ungroupedSpaceports[s.continent].length;e++){var t=s.ungroupedSpaceports[s.continent][e];if(t.name===s.filtername){s.spaceport=t,s.selectedValidSpaceport=!0;break}}},this.schedule=function(){s.flight.mission.name="sts-31",o.scheduleFlight(s.flight)},this.continentChanged=function(){s.filterChanged(),c()},this.selected=function(){s.flight.mission.vehicle=s.selectedVehicle,0===s.selectedVehicle.inventory&&(s.datePickerOptions.minDate.setFullYear((new Date).getFullYear()+1),s.flight.launchDate<s.datePickerOptions.minDate&&(s.flight.launchDate=s.datePickerOptions.minDate))},e.getVehicles().then(function(e){s.vehicles.all=e.vehicles,s.vehicles.all.forEach(function(e){e.selected=!1}),c()}),t.getSpaceports().then(function(e){s.ungroupedSpaceports=e,s.spaceports.northAmerica=a(e.northAmerica,"country"),c()})}angular.module("spaceyyz").component("scheduleFlight",{templateUrl:"src/flight/schedule.html",controller:e}),e.$inject=["vehicleInventoryFactory","spaceportFactory","$timeout","$scope","groupByFilter","solarSystemFactory","flightFactory"]}()},function(e,t){"use strict";!function(){function e(e,t,n){var i=this;this.user={email:e.user.email},e.onAuthChange("home",function(e){i.user.email=e.email,t(function(){n.$apply()})})}angular.module("spaceyyz").component("home",{templateUrl:"src/home.html",controller:e}),e.$inject=["userFactory","$timeout","$scope"]}()},function(e,t){"use strict";!function(){function e(){var e=this;this.filterName="",this.isOpen=!1,this.selectedValidItem=!1,this.filterNameChanged=function(){e.isOpen=!0,e.selectedItem={},e.selectedValidItem=!1;for(var t=0;t<e.items.length;t++){var n=e.items[t];if(n[e.display]==e.filterName){e.selectedItem=n,e.selectedValidItem=!0;break}}},this.itemSelected=function(t){e.selectedItem=t,e.selectedValidItem=!0,e.filterName=t[e.display]},this.itemFilter=function(t){return t[e.display].toLowerCase().includes(e.filterName.toLowerCase())}}angular.module("spaceyyz").component("combobox",{templateUrl:"src/launch-vehicles/combobox.html",controller:e,bindings:{items:"=",display:"@display",selectedItem:"="}})}()},function(e,t){"use strict";!function(){function e(e,t,n,i){this.vehicle=this.resolve.vehicle;var a=this;this.cancel=function(){a.modalInstance.dismiss("cancel")},this.confirm=function(){a.modalInstance.close(a.vehicle)}}angular.module("spaceyyz").component("confirmVehicleDeleteModal",{controller:e,templateUrl:"src/launch-vehicles/config-confirm-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$stateParams"]}()},function(e,t){"use strict";!function(){function e(e,t,n,i){var a=this;this.vehicles={all:[]},this.engines=[{name:"F1"}],this.newVehicle={},this.variants=[],this.search_name="",this.search=function(e){return e.name.toLowerCase().includes(a.search_name.toLowerCase())},this.editVehicle=function(e){e.beingEdited=!0},this.cancelEditVehicle=function(e){e.beingEdited=!1},this.saveVehicle=function(t){t.beingEdited=!1,e.updateVehicle(t);var n=a.vehicles.all.findIndex(function(e){return e.name===t.name});a.vehicles.all[n]=t},a.modalInstance={},this.deleteVehicle=function(t){a.modalInstance=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",component:"confirmVehicleDeleteModal",backdrop:"static",resolve:{vehicle:function(){return t}}}),a.modalInstance.result.then(function(t){e.deleteVehicle(t),a.vehicles.all.splice(a.vehicles.all.indexOf(t),1)})},this.createVehicle=function(t){e.addVehicle(t),a.vehicles.all.push(t),a.newVehicle={}},this.addNewVariant=function(){a.variants.push({name:"Unnamed",stages:[]})},this.addNewStage=function(e){e.stages.push({engines:[],selectedEngine:{}})},this.addEngine=function(e,t){"undefined"!=typeof e.name&&t.engines.push(e)},this.removeEngine=function(e,t){t.engines.splice(e,1)},e.getVehicles().then(function(e){a.vehicles.all=e.vehicles,n(function(){t.$apply()})})}angular.module("spaceyyz").component("configVehicle",{templateUrl:"src/launch-vehicles/config.html",controller:e}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$uibModal"]}()},function(e,t){"use strict";!function(){function e(e,t,n){this.orders={all:[]};var i=this;e.getOrders().then(function(e){i.orders.all=e;var a=(new Date).getTime();i.orders.all.forEach(function(e){var t=a-e.orderTimestamp;e.progress=100*t/(e.deliveryTimestamp-e.orderTimestamp)}),t(function(){n.$apply()})})}angular.module("spaceyyz").component("vehicleDevelopment",{templateUrl:"src/launch-vehicles/development.html",controller:e}),e.$inject=["orderFactory","$timeout","$scope"]}()},function(e,t){"use strict";!function(){function e(){function e(e){return function(t){return t.capacity>=e}}function t(e){return function(t){return t.capacity<e}}function n(e,t){return function(n){return n.capacity>=e&&n.capacity<t}}function i(e,t){return t.capacity-e.capacity}function a(){return firebase.database().ref().child("vehicles").once("value").then(function(a){var r={},c=a.val(),s=[];return Object.keys(c).forEach(function(e){var t=c[e];t.key=e,t.nameWithoutSpaces=t.name.replace(/\s+/g,"-"),s.push(t)}),o().then(function(a){return a.forEach(function(e){s.forEach(function(t){t.key===e.key&&(t.inventory=e.count)})}),r.vehicles=s,r.smallVehicles=s.filter(t(2e3)).sort(i),r.mediumVehicles=s.filter(n(2e3,2e4)).sort(i),r.heavyVehicles=s.filter(n(2e4,5e4)).sort(i),r.superHeavyVehicles=s.filter(e(5e4)).sort(i),r})})}function r(e,t){a().then(function(n){t(n.vehicles.filter(function(t){return t.nameWithoutSpaces==e})[0])})}function o(){return firebase.database().ref().child("inventory").once("value").then(function(e){var t=e.val(),n=[];return Object.keys(t).forEach(function(e){var i=t[e];i.key=e,n.push(i)}),n})}function c(e){var t=firebase.database().ref().child("vehicles").push().key,n={},i={count:0};n["/vehicles/"+t]=e,n["/inventory/"+t]=i,firebase.database().ref().update(n)}function s(e){firebase.database().ref().child("vehicles/"+e.key).set({capacity:e.capacity,cost:e.cost,name:e.name,description:e.description})}function l(e){firebase.database().ref().child("vehicles/"+e.key).remove()}return{getVehicle:r,getVehicles:a,getInventory:o,updateVehicle:s,deleteVehicle:l,addVehicle:c}}angular.module("spaceyyz").factory("vehicleInventoryFactory",e)}()},function(e,t){"use strict";!function(){function e(e,t,n){function i(e){a.smallVehicles=e.smallVehicles,a.mediumVehicles=e.mediumVehicles,a.heavyVehicles=e.heavyVehicles,a.superHeavyVehicles=e.superHeavyVehicles,t(function(){n.$apply()})}e.getVehicles().then(i),this.searchType="name",this.search_name="",this.search_payload=0;var a=this}angular.module("spaceyyz").component("vehicleInventory",{templateUrl:"src/launch-vehicles/inventory.html",controller:e}),e.$inject=["vehicleInventoryFactory","$timeout","$scope"]}()},function(e,t){"use strict";!function(){function e(e,t,n,i,a,r){var o=this;this.order=r.order,"undefined"==typeof this.order.number&&e.getOrder(Number(r.orderNumber)).then(function(e){o.order=e,i(function(){n.$apply()})}),this.modalInstance={},this.cancelOrder=function(){o.modalInstance=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"launch-vehicles/order-delete-modal.html",component:"orderDeleteModal",backdrop:"static",resolve:{order:function(){return o.order}}}),o.modalInstance.result.then(function(t){e.deleteOrder(o.order),a.go("auth.development")})}}angular.module("spaceyyz").component("orderConfirmation",{templateUrl:"src/launch-vehicles/order-confirmation.html",controller:e}),e.$inject=["orderFactory","$uibModal","$scope","$timeout","$state","$stateParams"]}()},function(e,t){"use strict";!function(){function e(e,t,n){var i=this;this.order=this.resolve.order,this.costToCancel=function(){var e=(new Date).getTime(),t=e-i.order.orderTimestamp,n=t/(i.order.deliveryTimestamp-i.order.orderTimestamp);return i.order.cost*n}(),this.cancel=function(){i.modalInstance.dismiss("cancel")},this.confirm=function(){i.modalInstance.close({name:0})}}angular.module("spaceyyz").component("orderDeleteModal",{controller:e,templateUrl:"src/launch-vehicles/order-delete-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["$scope","$timeout","$stateParams"]}()},function(e,t){"use strict";!function(){function e(e,t,n,i){this.vehicle=this.resolve.vehicle;var a=this;this.cancel=function(){a.modalInstance.dismiss("cancel")},this.confirm=function(){a.modalInstance.close({name:0})}}angular.module("spaceyyz").component("orderVehicleModal",{controller:e,templateUrl:"src/launch-vehicles/order-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$stateParams"]}()},function(e,t){"use strict";!function(){function e(e,t,n){function i(e){r.vehicles.all=e.vehicles,r.vehicles.small=e.smallVehicles,r.vehicles.medium=e.mediumVehicles,r.vehicles.heavy=e.heavyVehicles,r.vehicles.superHeavy=e.superHeavyVehicles,n(function(){t.$apply()})}function a(e){r.inventory=e}this.primaries=[{name:"Earth",satellites:["None","Moon"],selectedSatellite:"None"},{name:"Mars",satellites:["None","Phobos","Deimos"],selectedSatellite:"None"}],this.vehicles={all:[],small:[],medium:[],heavy:[],superHeavy:[]},this.selectedPrimary=this.primaries[0],this.search_name="",this.search_payload=1e4;var r=this;e.getVehicles().then(i),e.getInventory().then(a),this.search=function(e){return"name"===e?function(e){return e.name.toLowerCase().includes(r.search_name.toLowerCase())}:"capacity"===e?function(e){return e.capacity>=r.search_payload}:void 0}}angular.module("spaceyyz").component("orderLaunchVehicle",{templateUrl:"src/launch-vehicles/order-new.html",controller:e}),e.$inject=["vehicleInventoryFactory","$scope","$timeout"]}()},function(e,t){"use strict";!function(){function e(){function e(){return firebase.database().ref().child("orders/current").once("value").then(function(e){var t=e.val(),n=[];return Object.keys(t).forEach(function(e){var i=t[e];i.key=e,i.deliveryDate=new Date(i.deliveryTimestamp),i.orderDate=new Date(i.orderTimestamp),n.push(i)}),n})}function t(t){return e().then(function(e){var n={};return e.forEach(function(e){e.number===t&&(n=e)}),n})}function n(){return firebase.database().ref().child("orders/nextId").transaction(function(e){return(e||0)+1})}function i(e){var t=firebase.database().ref().child("orders/current").push().key,n={};e.deliveryTimestamp=e.deliveryDate.getTime(),n["/orders/current/"+t]=e,firebase.database().ref().update(n)}function a(e){firebase.database().ref().child("orders/current/"+e.key).set({number:e.number,orderTimestamp:e.orderTimestamp,deliveryTimestamp:e.deliveryDate.getTime(),vehicleName:e.vehicleName,cost:e.cost})}function r(e){firebase.database().ref().child("orders/current/"+e.key).remove()}return{getOrders:e,getOrder:t,getNewOrderNumber:n,addOrder:i,updateOrder:a,deleteOrder:r}}angular.module("spaceyyz").factory("orderFactory",e)}()},function(e,t){"use strict";!function(){function e(e,t,n,i,a,r,o){this.vehicle={};var c=this;e.getVehicle(i.name,function(e){c.vehicle=e,n(function(){t.$apply()})}),c.modalInstance={},this.open=function(){c.modalInstance=a.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"launch-vehicles/order-modal.html",component:"orderVehicleModal",backdrop:"static",resolve:{vehicle:function(){return c.vehicle}}}),c.modalInstance.result.then(function(e){var t=new Date;t.setFullYear((new Date).getFullYear()+1);var n={orderTimestamp:(new Date).getTime(),deliveryDate:t,vehicleName:c.vehicle.name,cost:c.vehicle.cost};o.getNewOrderNumber().then(function(e){var t=e.snapshot.val();n.number=t,o.addOrder(n),r.go("auth.orderConfirmation",{orderNumber:t,order:n})},function(e){console.error(e)})})}}angular.module("spaceyyz").component("vehicleOrderDetail",{templateUrl:"src/launch-vehicles/vehicle-order-detail.html",controller:e}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$stateParams","$uibModal","$state","orderFactory"]}()},function(e,t){"use strict";!function(){function e(){this.searchType="name",this.search_name="",this.search_payload=1e4;var e=this;this.search=function(t){return"name"===t?function(t){return t.name.toLowerCase().includes(e.search_name.toLowerCase())}:"capacity"===t?function(t){return t.capacity>=e.search_payload}:void 0}}angular.module("spaceyyz").component("vehicleList",{templateUrl:"src/launch-vehicles/vehicle.html",controller:e,bindings:{vehicles:"<"}})}()},function(e,t){"use strict";!function(){function e(e,t){var n=this;this.email="",this.password="",this.newAccount={email:"",password:"",confirmPassword:""},this.login=function(){var i=e.login(n.email,this.password);i.then(function(e){t.go(t.params.redirectTo||"auth.home")})},this.register=function(){""!==n.newAccount.email&&""!==n.newAccount.password&&n.newAccount.password===n.newAccount.confirmPassword&&e.register(n.newAccount.email,n.newAccount.password).then(function(e){t.go(t.params.redirectTo||"auth.home")},function(e){alert("Error registering: "+e.code+", "+e.message)})}}angular.module("spaceyyz").component("login",{templateUrl:"src/login/login.html",controller:e}),e.$inject=["userFactory","$state"]}()},function(e,t){"use strict";!function(){function e(){function e(){return firebase.database().ref().child("engines").once("value").then(function(e){var t=e.val(),n=[];return Object.keys(t).forEach(function(e){var i=t[e];i.key=e,n.push(i)}),n})}var t=this;return t.getEngines=e,t}angular.module("spaceyyz").factory("engineFactory",e)}()},function(e,t){"use strict";!function(){function e(){}angular.module("spaceyyz").component("researchEngine",{templateUrl:"src/research-development/engines.html",controller:e})}()},function(e,t){"use strict";!function(){function e(){return this.planets=[{name:"Mercury",moons:["None"]},{name:"Venus",moons:["None"]},{name:"Earth",moons:["None","Moon"]},{name:"Mars",moons:["None","Phobos","Deimos"]},{name:"Jupiter",moons:["None","Io","Europa","Ganymede","Callisto"]},{name:"Saturn",moons:["None","Titan","Rhea"]},{name:"Uranus",moons:["None","Miranda","Ariel","Umbriel","Titania","Oberon"]},{name:"Neptune",moons:["None","Triton"]},{name:"Pluto",moons:["None","Charon","Styx","Nix","Kerberos","Hydra"]}],this}angular.module("spaceyyz").factory("solarSystemFactory",e)}()},function(e,t){"use strict";!function(){function e(e){this.spaceport=this.resolve.spaceport;var t=this;this.cancel=function(){t.modalInstance.dismiss("cancel")},this.confirm=function(){t.modalInstance.close(t.spaceport)}}angular.module("spaceyyz").component("confirmSpaceportDeleteModal",{controller:e,templateUrl:"src/spaceports/config-confirm-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["spaceportFactory"]}()},function(e,t){"use strict";!function(){function e(e,t,n,i){var a=this;this.search_name="",this.newSpaceport={},this.spaceports={},this.successfullyCreated=!1,e.getSpaceports().then(function(e){a.spaceports=e,t(function(){n.$apply()})}),this.onChange=function(){a.successfullyCreated=!1},this.search=function(e){return e.name.toLowerCase().includes(a.search_name.toLowerCase())},this.editSpaceport=function(e){e.beingEdited=!0},this.cancelEditSpaceport=function(e){e.beingEdited=!1},this.saveSpaceport=function(t){t.beingEdited=!1,e.updateSpaceport(t);var n=a.spaceports.all.findIndex(function(e){return e.name===t.name});a.spaceports.all[n]=t},this.createSpaceport=function(t){e.addSpaceport(t),a.spaceports.all.push(t),a.newSpaceport={},this.successfullyCreated=!0},this.modalInstance={},this.deleteSpaceport=function(t){a.modalInstance=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",component:"confirmSpaceportDeleteModal",backdrop:"static",resolve:{spaceport:function(){return t}}}),a.modalInstance.result.then(function(t){e.deleteSpaceport(t),a.spaceports.all.splice(a.spaceports.all.indexOf(t),1)})}}angular.module("spaceyyz").component("configureSpaceport",{templateUrl:"src/spaceports/configure.html",controller:e}),e.$inject=["spaceportFactory","$timeout","$scope","$uibModal"]}()},function(e,t){"use strict";!function(){function e(){function e(){return firebase.database().ref().child("spaceports").once("value").then(function(e){var t=e.val(),n=[],i=[];return Object.keys(t).forEach(function(e){var a=[];Object.keys(t[e]).forEach(function(n){var r=t[e][n];r.key=n,r.continent=e,a.push(r),i.push(r)}),n[e]=a}),n.all=i,n})}function t(e){var t=firebase.database().ref().child("spaceports/"+e.continent).push({name:e.name,country:e.country}).key;e.key=t}function n(e){firebase.database().ref().child("spaceports/"+e.continent+"/"+e.key).set({name:e.name,country:e.country})}function i(e){firebase.database().ref().child("spaceports/"+e.continent+"/"+e.key).remove()}return{getSpaceports:e,addSpaceport:t,updateSpaceport:n,deleteSpaceport:i}}angular.module("spaceyyz").factory("spaceportFactory",e)}()},function(e,t){"use strict";!function(){function e(e,t,n){var i=this;this.spaceports={},e.getSpaceports().then(function(e){i.spaceports=e,t(function(){n.$apply()})})}angular.module("spaceyyz").component("spaceportStatus",{templateUrl:"src/spaceports/spaceport-status.html",controller:e}),e.$inject=["spaceportFactory","$timeout","$scope"]}()},function(e,t){"use strict";!function(){function e(e){function t(e,t){o.authChangeSubscribers[e]=t}function n(){return o.factory.user.email}function i(e,t){return firebase.auth().signInWithEmailAndPassword(e,t).catch(function(e){alert("Error logging in: "+e.code+", "+e.message)})}function a(){firebase.auth().signOut().then(function(){c.user.email="",e.go("login",{},{reload:!0})},function(e){alert("error logging out: "+e)})}function r(e,t){return firebase.auth().createUserWithEmailAndPassword(e,t)}var o=this,c={email:this.email,user:{email:""},getEmail:n,login:i,logout:a,register:r,onAuthChange:t};return this.email="",this.password="",this.authChangeSubscribers={},firebase.auth().currentUser&&(c.user.email=firebase.auth().currentUser.email),firebase.auth().onAuthStateChanged(function(e){e?c.user.email=e.email:c.user.email="",Object.keys(o.authChangeSubscribers).forEach(function(t){o.authChangeSubscribers[t](e)})}),c}angular.module("spaceyyz").factory("userFactory",e),e.$inject=["$state"]}()},function(e,t){"use strict";!function(){function e(e,t,n,i){var a=this;this.user=e,n.user=e,this.getEmail=function(){return e.getEmail()},this.email=function(){return e.getEmail()},this.login=function(n,i){var a=e.login(n,i);a.then(function(){t.go("auth.home")})},this.logout=function(){this.email="",e.logout()},this.isLoggedIn=function(){return""!==a.user.user.email},e.onAuthChange(a,function(){i(function(){n.$apply()})})}angular.module("spaceyyz").controller("userAccount",e),e.$inject=["userFactory","$state","$scope","$timeout"]}()}]);