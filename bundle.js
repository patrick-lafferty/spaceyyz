(e=>{function t(i){if(a[i])return a[i].exports;var n=a[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};t.m=e,t.c=a,t.d=((e,a,i)=>{t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})}),t.n=(e=>{var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a}),t.o=((e,t)=>Object.prototype.hasOwnProperty.call(e,t)),t.p="",t(t.s=0)})([(e,t,a)=>{a(1),a(2),a(3),a(4),a(5),a(6),a(7),a(8),a(9),a(10),a(11),a(12),a(13),a(14),a(15),a(16),a(17),a(18),a(19),a(20),a(21),a(22),a(23),a(24),a(25),a(26),a(27),a(28),a(29),a(30),a(31),a(32),a(33),a(34)},(e,t)=>{angular.module("spaceyyz",["ui.bootstrap","ui.router"])},(e,t)=>{(()=>{"use strict";angular.module("spaceyyz").config(["$stateProvider",e=>{var t=[{name:"home",url:"/home",component:"home"},{name:"orderNew",url:"/launchVehicles/orderNew",component:"orderLaunchVehicle"},{name:"vehicleOrderDetail",url:"/launchVehicles/orderNew/:name",component:"vehicleOrderDetail"},{name:"orderConfirmation",url:"/launchVehicles/order/:orderNumber",component:"orderConfirmation",params:{order:{},hiddenParam:"YES"}},{name:"development",url:"/launchVehicles/development",component:"vehicleDevelopment"},{name:"completed",url:"/launchVehicles/inventory",component:"vehicleInventory"},{name:"config",url:"/launchVehicles/config",component:"configVehicle"},{name:"schedule",url:"/flight/schedule",component:"scheduleFlight"},{name:"progress",url:"/flight/progress",component:"flightProgress"},{name:"flightDetails",url:"/flight/details/:missionName",component:"flightDetails",params:{flight:{},hiddenParam:"YES"}},{name:"spaceportStatus",url:"/spaceports/status",component:"spaceportStatus",params:{continent:{},hiddenParam:"YES"}},{name:"configureSpaceport",url:"/spaceports/configure",component:"configureSpaceport"},{name:"researchEngine",url:"/research/engine",component:"researchEngine"},{name:"designStage",url:"/research/stage",component:"designStage"}],a=[{name:"about",url:"/about",component:"about"},{name:"login",url:"/login",component:"login",params:{redirectTo:"home"}}],i={name:"auth",template:"<ui-view></ui-view>"};e.state(i),t.forEach(t=>{t.parent=i,e.state(t)}),a.forEach(t=>{e.state(t)})}]),angular.module("spaceyyz").run(["$state","$transitions",(e,t)=>{t.onBefore({to:"login"},e=>!firebase.auth().currentUser||e.router.stateService.target("home")),t.onBefore({to:e=>"auth"==e.parent.name},e=>{if(firebase.auth().currentUser)return!0;for(const e in localStorage)if(e.startsWith("firebase:authUser"))return!0;return e.router.stateService.target("login",{redirectTo:e.$to().name},{reload:!0})})}])})()},(e,t)=>{(()=>{"use strict";angular.module("spaceyyz").filter("groupBy",()=>(e,t)=>{var a={};if(void 0===e)return a;for(let i=0;i<e.length;i++){const n=e[i],r=n[t];void 0===a[r]&&(a[r]={name:r,spaceports:[]}),a[r].spaceports.push(n)}return a})})()},(e,t)=>{(()=>{"use strict";function e(e){function t(e){return t=>t.capacity>=e}function a(e){return t=>t.capacity<e}function i(e,t){return a=>a.capacity>=e&&a.capacity<t}function n(e,t){return t.variant.capacity-e.variant.capacity}function r(e,t){t.forEach(t=>{let a={};for(let i=0;i<e.length;i++)if(e[i].familyKey===t.key){a=e[i];break}a.variants=t.variants})}function s(e,t){return{name:e.name,nameWithoutSpaces:e.nameWithoutSpaces,description:e.description,key:e.key,familyKey:e.familyKey,variant:t}}function o(e){var r=Object.create(null);return r.smallVehicles=[],r.mediumVehicles=[],r.heavyVehicles=[],r.superHeavyVehicles=[],e.forEach(e=>{e.variants.forEach(n=>{a(2e3)(n)?r.smallVehicles.push(new s(e,n)):i(2e3,2e4)(n)?r.mediumVehicles.push(new s(e,n)):i(2e4,5e4)(n)?r.heavyVehicles.push(new s(e,n)):t(5e4)(n)&&r.superHeavyVehicles.push(new s(e,n))})}),Object.keys(r).forEach(e=>{r[e].sort(n)}),r.allVehicles=e,r}function c(){return Promise.all([firebase.database().ref().child("vehicles").once("value"),l(),e.getFamilies()]).then(e=>{var t=e[0].val(),a=[],i=Object.create(null);return Object.keys(t).forEach(e=>{var n=t[e];n.key=e,n.nameWithoutSpaces=n.name.replace(/\s+/g,"-"),a.push(n),i[n.key]=n}),r(a,e[2]),e[1].forEach(e=>{Object.keys(e).forEach(t=>{let a=e[t],n=i[e.key].variants;for(let e=0;e<n.length;e++)if(n[e].key===t){n[e].count=a.count;break}})}),o(a)})}function l(){return firebase.database().ref().child("inventory").once("value").then(e=>{var t=e.val(),a=[];return Object.keys(t).forEach(e=>{var i=t[e];i.key=e,a.push(i)}),a})}return{getVehicle(e){return c().then(t=>{for(var a=0;a<t.allVehicles.length;a++)if(t.allVehicles[a].nameWithoutSpaces==e)return t.allVehicles[a]})},getVehicles:c,getInventory:l,updateVehicle(t){firebase.database().ref().child("vehicles/"+t.key).set({name:t.name,description:t.description,familyKey:t.familyKey}),e.replaceVariants(t.familyKey,t.variants)},deleteVehicle(e){firebase.database().ref().child("vehicles/"+e.key).remove(),firebase.database().ref().child("variants/"+e.familyKey).remove()},addVehicle(t){var a=firebase.database().ref().child("vehicles").push().key,i={},n={},r=firebase.database().ref().child("variants").push().key;i["/vehicles/"+a]={name:t.name,description:t.description,familyKey:r},t.familyKey=r,t.variants.forEach(t=>{e.addVariant(t,r),n[t.key]={count:0}}),i["/inventory/"+a]=n,firebase.database().ref().update(i)},combineVehiclesWithVariants:r,categorizeVehicles:o}}angular.module("spaceyyz").factory("vehicleInventoryFactory",e),e.$inject=["variantFactory"]})()},(e,t)=>{(()=>{"use strict";angular.module("spaceyyz").factory("orderFactory",function(){function e(){return firebase.database().ref().child("orders/current").once("value").then(e=>{var t=e.val(),a=[];return Object.keys(t).forEach(e=>{var i=t[e];i.key=e,i.deliveryDate=new Date(i.deliveryTimestamp),i.orderDate=new Date(i.orderTimestamp),a.push(i)}),a})}return{getOrders:e,getOrder:t=>e().then(e=>{var a={};return e.forEach(e=>{e.number===t&&(a=e)}),a}),getNewOrderNumber:()=>firebase.database().ref().child("orders/nextId").transaction(e=>(e||0)+1),addOrder(e){var t=firebase.database().ref().child("orders/current").push().key,a={};e.deliveryTimestamp=e.deliveryDate.getTime(),a["/orders/current/"+t]=e,firebase.database().ref().update(a)},updateOrder(e){firebase.database().ref().child("orders/current/"+e.key).set({number:e.number,orderTimestamp:e.orderTimestamp,deliveryTimestamp:e.deliveryDate.getTime(),vehicleName:e.vehicleName,cost:e.cost})},deleteOrder(e){firebase.database().ref().child("orders/current/"+e.key).remove()}}})})()},function(e,t){!function(){"use strict";function e(e){var t=this,a={email:this.email,user:{email:""},getEmail(){return t.factory.user.email},login(e,t){return firebase.auth().signInWithEmailAndPassword(e,t).catch(e=>{alert("Error logging in: "+e.code+", "+e.message)})},logout(){firebase.auth().signOut().then(()=>{a.user.email="",e.go("login",{},{reload:!0})},e=>{alert("error logging out: "+e)})},register(e,t){return firebase.auth().createUserWithEmailAndPassword(e,t)},onAuthChange(e,a){t.authChangeSubscribers[e]=a}};return this.email="",this.password="",this.authChangeSubscribers={},firebase.auth().currentUser&&(a.user.email=firebase.auth().currentUser.email),firebase.auth().onAuthStateChanged(e=>{a.user.email=e?e.email:"",Object.keys(t.authChangeSubscribers).forEach(a=>{t.authChangeSubscribers[a](e)})}),a}angular.module("spaceyyz").factory("userFactory",e),e.$inject=["$state"]}()},function(e,t){!function(){"use strict";angular.module("spaceyyz").factory("solarSystemFactory",function(){return this.planets=[{name:"Mercury",moons:["None"]},{name:"Venus",moons:["None"]},{name:"Earth",moons:["None","Moon"]},{name:"Mars",moons:["None","Phobos","Deimos"]},{name:"Jupiter",moons:["None","Io","Europa","Ganymede","Callisto"]},{name:"Saturn",moons:["None","Titan","Rhea"]},{name:"Uranus",moons:["None","Miranda","Ariel","Umbriel","Titania","Oberon"]},{name:"Neptune",moons:["None","Triton"]},{name:"Pluto",moons:["None","Charon","Styx","Nix","Kerberos","Hydra"]}],this})}()},function(e,t){!function(){"use strict";angular.module("spaceyyz").factory("flightFactory",function(){var e=this;return this.scheduleFlight=(e=>{e.mission.destination.primary=e.mission.destination.primary.name,e.mission.vehicle=e.mission.vehicle.key,e.launch.dateTimestamp=e.launch.date.getTime(),firebase.database().ref().child("flights").push(e)}),this.getFlights=(()=>firebase.database().ref().child("flights").once("value").then(e=>{var t=e.val(),a=[];return Object.keys(t).forEach(e=>{var i=t[e];i.mission.name=i.mission.id,a.push(i)}),a})),this.getFlight=(t=>e.getFlights().then(e=>e[e.findIndex(e=>e.mission.name===t)])),this})}()},(e,t)=>{(()=>{"use strict";angular.module("spaceyyz").factory("engineFactory",function(){return{getEngines:()=>firebase.database().ref().child("engines").once("value").then(e=>{var t=e.val(),a=[];return null!==t&&void 0!==t&&Object.keys(t).forEach(e=>{var i=t[e];i.key=e,a.push(i)}),a}),addEngine(e){firebase.database().ref().child("engines").push({name:e.name,isp:e.isp,thrust:e.thrust,description:e.description})},updateEngine(e){firebase.database().ref().child("engines/"+e.key).set({name:e.name,isp:e.isp,thrust:e.thrust,description:e.description})},deleteEngine(e){firebase.database().ref().child("engines/"+e.key).remove()}}})})()},(e,t)=>{(()=>{"use strict";angular.module("spaceyyz").factory("variantFactory",function(){function e(e,t){var a=e.stages.map(e=>({name:e.name,engines:e.engines.map(e=>e.key)}));firebase.database().ref().child("variants/"+t).push({name:e.name,capacity:e.capacity,cost:e.cost,description:e.description,stages:a})}return{getFamilies:()=>firebase.database().ref().child("variants").once("value").then(e=>{var t=e.val(),a=[];return null!==t&&Object.keys(t).forEach(e=>{var i=t[e],n=[];Object.keys(i).forEach(e=>{var t=i[e];t.key=e,n.push(t)}),i.variants=n,i.key=e,a.push(i)}),a}),addVariant:e,replaceVariants(t,a){firebase.database().ref().child("variants/"+t).remove(),a.forEach(a=>{e(a,t)})}}})})()},function(e,t){!function(){"use strict";angular.module("spaceyyz").component("combobox",{templateUrl:"src/launch-vehicles/combobox.html",controller(){var e=this;this.filterName="",this.isOpen=!1,this.selectedValidItem=!1,this.filterNameChanged=(()=>{e.isOpen=!0,e.selectedItem={},e.selectedValidItem=!1;for(var t=0;t<e.items.length;t++){var a=e.items[t];if(a[e.display]==e.filterName){e.selectedItem=a,e.selectedValidItem=!0;break}}}),this.itemSelected=(t=>{e.selectedItem=t,e.selectedValidItem=!0,e.filterName=t[e.display]}),this.itemFilter=(t=>t[e.display].toLowerCase().includes(e.filterName.toLowerCase()))},bindings:{items:"=",display:"@display",selectedItem:"="}})}()},function(e,t){!function(){"use strict";function e(e,t){var a=this;this.email="",this.password="",this.newAccount={email:"",password:"",confirmPassword:""},this.login=function(){e.login(a.email,this.password).then(e=>{t.go(t.params.redirectTo||"auth.home")})},this.register=(()=>{""!==a.newAccount.email&&""!==a.newAccount.password&&a.newAccount.password===a.newAccount.confirmPassword&&e.register(a.newAccount.email,a.newAccount.password).then(e=>{t.go(t.params.redirectTo||"auth.home")},e=>{alert("Error registering: "+e.code+", "+e.message)})})}angular.module("spaceyyz").component("login",{templateUrl:"src/login/login.html",controller:e}),e.$inject=["userFactory","$state"]}()},function(e,t){!function(){"use strict";function e(e,t,a){var i=this;this.user={email:e.user.email},e.onAuthChange("home",e=>{i.user.email=e.email,t(()=>{a.$apply()})})}angular.module("spaceyyz").component("home",{templateUrl:"src/home.html",controller:e}),e.$inject=["userFactory","$timeout","$scope"]}()},(e,t)=>{(()=>{"use strict";angular.module("spaceyyz").component("about",{templateUrl:"src/about.html",controller(){}})})()},function(e,t){!function(){"use strict";function e(e,t,a,i){var n=this;this.user=e,a.user=e,this.getEmail=(()=>e.getEmail()),this.email=(()=>e.getEmail()),this.login=((a,i)=>{e.login(a,i).then(()=>{t.go("home")})}),this.logout=function(){this.email="",e.logout()},this.isLoggedIn=(()=>""!==n.user.user.email),e.onAuthChange(n,()=>{i(()=>{a.$apply()})})}angular.module("spaceyyz").controller("userAccount",e),e.$inject=["userFactory","$state","$scope","$timeout"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i){function n(e){r.vehicles.all=e.allVehicles,r.vehicles.small=e.smallVehicles,r.vehicles.medium=e.mediumVehicles,r.vehicles.heavy=e.heavyVehicles,r.vehicles.superHeavy=e.superHeavyVehicles}this.primaries=[{name:"Earth",satellites:["None","Moon"],selectedSatellite:"None"},{name:"Mars",satellites:["None","Phobos","Deimos"],selectedSatellite:"None"}],this.vehicles={all:[],small:[],medium:[],heavy:[],superHeavy:[]},this.selectedPrimary=this.primaries[0],this.search_name="",this.search_payload=1e4;var r=this;e.getInventory().then(function(e){r.inventory=e}),Promise.all([e.getVehicles(),i.getFamilies()]).then(e=>{n(e[0]),e[1].forEach(e=>{for(var t,a=0;a<r.vehicles.all.length;a++)if(r.vehicles.all[a].familyKey===e.key){t=r.vehicles.all[a];break}t.variants=e.variants}),a(()=>{t.$apply()})}),this.search=(e=>"name"===e?e=>e.name.toLowerCase().includes(r.search_name.toLowerCase()):"capacity"===e?e=>e.variants.some(e=>e.capacity>=r.search_payload):void 0),this.variantFilter=(e=>"capacity"!==r.searchType||e.capacity>=r.search_payload)}angular.module("spaceyyz").component("orderLaunchVehicle",{templateUrl:"src/launch-vehicles/order-new.html",controller:e}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","variantFactory"]}()},function(e,t){!function(){"use strict";angular.module("spaceyyz").component("vehicleList",{templateUrl:"src/launch-vehicles/vehicle.html",controller(){this.searchType="name",this.search_name="",this.search_payload=1e4;var e=this;this.search=(t=>"name"===t?t=>t.name.toLowerCase().includes(e.search_name.toLowerCase()):"capacity"===t?t=>t.variant.capacity>=e.search_payload:void 0)},bindings:{vehicles:"<"}})}()},function(e,t){!function(){"use strict";function e(e,t,a,i,n,r,s,o){this.vehicle={};var c=this;Promise.all([e.getVehicle(i.name),o.getFamilies()]).then(e=>{c.vehicle=e[0];for(var i=e[1],n=0;n<i.length;n++)if(i[n].key===c.vehicle.familyKey){c.vehicle.variants=i[n].variants;break}a(()=>{t.$apply()})}),c.modalInstance={},this.open=(e=>{c.modalInstance=n.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"launch-vehicles/order-modal.html",component:"orderVehicleModal",backdrop:"static",resolve:{vehicle:()=>c.vehicle,variant:()=>e}}),c.modalInstance.result.then(e=>{var t=new Date;t.setFullYear((new Date).getFullYear()+1);var a={orderTimestamp:(new Date).getTime(),deliveryDate:t,vehicleName:c.vehicle.name,variantName:e.name,cost:e.cost};s.getNewOrderNumber().then(e=>{var t=e.snapshot.val();a.number=t,s.addOrder(a),r.go("orderConfirmation",{orderNumber:t,order:a})},e=>{console.error(e)})})})}angular.module("spaceyyz").component("vehicleOrderDetail",{templateUrl:"src/launch-vehicles/vehicle-order-detail.html",controller:e}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$stateParams","$uibModal","$state","orderFactory","variantFactory"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i){this.vehicle=this.resolve.vehicle,this.variant=this.resolve.variant;var n=this;this.cancel=(()=>{n.modalInstance.dismiss("cancel")}),this.confirm=(()=>{n.modalInstance.close(n.variant)})}angular.module("spaceyyz").component("orderVehicleModal",{controller:e,templateUrl:"src/launch-vehicles/order-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$stateParams"]}()},function(e,t){!function(){"use strict";function e(e,t,a){var i=this;this.order=this.resolve.order,this.costToCancel=(()=>{var e=((new Date).getTime()-i.order.orderTimestamp)/(i.order.deliveryTimestamp-i.order.orderTimestamp);return i.order.cost*e})(),this.cancel=(()=>{i.modalInstance.dismiss("cancel")}),this.confirm=(()=>{i.modalInstance.close({name:0})})}angular.module("spaceyyz").component("orderDeleteModal",{controller:e,templateUrl:"src/launch-vehicles/order-delete-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["$scope","$timeout","$stateParams"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i,n,r){var s=this;this.order=r.order,void 0===this.order.number&&e.getOrder(Number(r.orderNumber)).then(e=>{s.order=e,i(()=>{a.$apply()})}),this.modalInstance={},this.cancelOrder=(()=>{s.modalInstance=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"launch-vehicles/order-delete-modal.html",component:"orderDeleteModal",backdrop:"static",resolve:{order:()=>s.order}}),s.modalInstance.result.then(t=>{e.deleteOrder(s.order),n.go("development")})})}angular.module("spaceyyz").component("orderConfirmation",{templateUrl:"src/launch-vehicles/order-confirmation.html",controller:e}),e.$inject=["orderFactory","$uibModal","$scope","$timeout","$state","$stateParams"]}()},function(e,t){!function(){"use strict";function e(e,t,a){this.orders={all:[]};var i=this;e.getOrders().then(e=>{i.orders.all=e;var n=(new Date).getTime();i.orders.all.forEach(e=>{var t=n-e.orderTimestamp;e.progress=100*t/(e.deliveryTimestamp-e.orderTimestamp)}),t(()=>{a.$apply()})})}angular.module("spaceyyz").component("vehicleDevelopment",{templateUrl:"src/launch-vehicles/development.html",controller:e}),e.$inject=["orderFactory","$timeout","$scope"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i){var n=this;this.searchType="name",this.search_name="",this.search_payload=0,Promise.all([e.getVehicles()]).then(e=>{var i=e[0];n.smallVehicles=i.smallVehicles,n.mediumVehicles=i.mediumVehicles,n.heavyVehicles=i.mediumVehicles,n.superHeavyVehicles=i.superHeavyVehicles,t(()=>{a.$apply()})})}angular.module("spaceyyz").component("vehicleInventory",{templateUrl:"src/launch-vehicles/inventory.html",controller:e}),e.$inject=["vehicleInventoryFactory","$timeout","$scope","variantFactory"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i,n,r){var s=this;this.vehicles={all:[]},this.engines=[],this.newVehicle={variants:[]},this.variants=[],this.search_name="",this.search=(e=>e.name.toLowerCase().includes(s.search_name.toLowerCase())),this.editVehicle=(e=>{e.beingEdited=!0}),this.cancelEditVehicle=(e=>{e.beingEdited=!1}),this.saveVehicle=(t=>{t.beingEdited=!1,e.updateVehicle(t);var a=s.vehicles.all.findIndex(e=>e.name===t.name);s.vehicles.all[a]=t}),s.modalInstance={},this.deleteVehicle=(t=>{s.modalInstance=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",component:"confirmVehicleDeleteModal",backdrop:"static",resolve:{vehicle:()=>t}}),s.modalInstance.result.then(t=>{e.deleteVehicle(t),s.vehicles.all.splice(s.vehicles.all.indexOf(t),1)})}),this.createVehicle=(t=>{e.addVehicle(t),s.vehicles.all.push(t),s.newVehicle={variants:[]},s.variants=[]}),this.addNewVariant=(e=>{e.variants.push({name:"Unnamed",stages:[]})}),this.removeVariant=((e,t)=>{t.variants.splice(e,1)}),this.addNewStage=(e=>{e.stages.push({engines:[],selectedEngine:{}})}),this.removeStage=((e,t)=>{t.stages.splice(e,1)}),this.addEngine=((e,t)=>{void 0!==e.name&&t.engines.push(e)}),this.removeEngine=((e,t)=>{t.engines.splice(e,1)}),Promise.all([e.getVehicles(),n.getEngines(),r.getFamilies()]).then(e=>{s.vehicles.all=e[0].allVehicles,s.engines=e[1],e[2].forEach(e=>{for(var t,a=0;a<s.vehicles.all.length;a++)if(s.vehicles.all[a].familyKey===e.key){t=s.vehicles.all[a];break}t.variants=e.variants,t.variants.forEach(e=>{e.stages.forEach(e=>{e.engines=e.engines.map(e=>{var t;return s.engines.forEach(a=>{a.key===e&&(t=a)}),t})})})}),a(()=>{t.$apply()})})}angular.module("spaceyyz").component("configVehicle",{templateUrl:"src/launch-vehicles/config.html",controller:e}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$uibModal","engineFactory","variantFactory"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i){this.vehicle=this.resolve.vehicle;var n=this;this.cancel=(()=>{n.modalInstance.dismiss("cancel")}),this.confirm=(()=>{n.modalInstance.close(n.vehicle)})}angular.module("spaceyyz").component("confirmVehicleDeleteModal",{controller:e,templateUrl:"src/launch-vehicles/config-confirm-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["vehicleInventoryFactory","$scope","$timeout","$stateParams"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i,n,r,s){function o(){a(()=>{i.$apply()})}this.payload=0;var c=this;this.solarSystem=r,this.filter=(e=>e.variants.some(e=>e.capacity>=Number(c.payload))),this.variantFilter=(e=>e.capacity>=Number(c.payload)),this.vehicles={all:[]},this.selectedVehicle={},this.datePicker={isOpen:!1},this.flight={mission:{id:"",payload:0,destination:{primary:c.solarSystem.planets[2],secondary:"None"},type:"orbit",vehicle:{}},launch:{date:new Date,site:{}}},this.datePickerOptions={minDate:new Date},this.spaceports={},this.continent="northAmerica",this.spaceport={},this.selectedValidSpaceport=!1,this.filtername="",this.spaceportFilter=(e=>e.name.toLowerCase().includes(c.filtername.toLowerCase())),this.isopen=!1,this.spaceportSelected=(e=>{c.spaceport=e,c.selectedValidSpaceport=!0,c.filtername=e.name}),this.filterChanged=(()=>{c.isopen=!0,c.spaceport={},c.selectedValidSpaceport=!1;for(var e=0;e<c.ungroupedSpaceports[c.continent].length;e++){var t=c.ungroupedSpaceports[c.continent][e];if(t.name===c.filtername){c.spaceport=t,c.selectedValidSpaceport=!0;break}}}),this.schedule=(()=>{c.flight.mission.name="sts-31",s.scheduleFlight(c.flight)}),this.continentChanged=(()=>{c.filterChanged(),o()}),this.selected=(()=>{c.flight.mission.vehicle=c.selectedVehicle,0===c.selectedVehicle.inventory&&(c.datePickerOptions.minDate.setFullYear((new Date).getFullYear()+1),c.flight.launchDate<c.datePickerOptions.minDate&&(c.flight.launchDate=c.datePickerOptions.minDate))}),e.getVehicles().then(e=>{c.vehicles.all=e.allVehicles,c.vehicles.all.forEach(e=>{e.selected=!1}),o()}),t.getSpaceports().then(e=>{c.ungroupedSpaceports=e,c.spaceports.northAmerica=n(e.northAmerica,"country"),o()})}angular.module("spaceyyz").component("scheduleFlight",{templateUrl:"src/flight/schedule.html",controller:e}),e.$inject=["vehicleInventoryFactory","spaceportFactory","$timeout","$scope","groupByFilter","solarSystemFactory","flightFactory"]}()},function(e,t){!function(){"use strict";function e(e,t,a){var i=this;this.flights=[],e.getFlights().then(e=>{i.flights=e,t(()=>{a.$apply()})})}angular.module("spaceyyz").component("flightProgress",{templateUrl:"src/flight/progress.html",controller:e}),e.$inject=["flightFactory","$timeout","$scope"]}()},function(e,t){!function(){"use strict";function e(e,t,a,i){function n(){s.flight.launch.date<=Date.now&&(s.flight.launched=!0),s.flight.status={velocity:0,altitude:0}}function r(){for(var e=0,t=0;t<m.length&&s.elapsedTime>=m[t]*s.maxFlightTime;t++)e++;return e}var s=this;this.flight=e.flight,this.playbackSpeed="Realtime",void 0===this.flight.mission?t.getFlight(e.missionName).then(e=>{s.flight=e,s.flight.launched=!1,n(),a(()=>{i.$apply()})}):(s.flight.launched=!1,n());var o=document.getElementById("ascentPath"),c=document.getElementById("point"),l=document.querySelector("svg"),h=l.createSVGPoint();o.addEventListener("mousedown",e=>{h.x=e.clientX,h.y=e.clientY;var t=h.matrixTransform(l.getScreenCTM().inverse());c.setAttribute("cx",t.x),c.setAttribute("cy",t.y),console.log(t.x+", "+t.y)}),s.animLength=5;var m=[.022,.167,.4,.55,.954];this.changePlaybackSpeed=(()=>{switch(s.playbackSpeed){case"Realtime":s.animLength=600;break;case"10x":s.animLength=60}document.querySelectorAll("circle.futureFlightEvent").forEach((e,t)=>{e.style.setProperty("animation-delay",m[t]*s.animLength+"s")}),document.querySelectorAll("text.futureFlightEvent").forEach((e,t)=>{e.style.setProperty("animation-delay",m[t]*s.animLength+"s")}),o.style.setProperty("animation-duration",s.animLength+"s")}),this.changePlaybackSpeed();var u=window.setInterval(function(){s.elapsedTime>=s.maxFlightTime&&window.clearInterval(u),s.elapsedTime+=s.maxFlightTime/s.animLength,s.flight.status.velocity=40*s.elapsedTime,s.flight.status.altitude++;var e=r();if(e>s.currentStage){s.currentStage=e,s.flight.log=[];for(var t=0;t<e;t++)for(var n=0;n<s.events[t].length;n++)s.flight.log.push(s.events[t][n])}a(()=>{i.$apply()})},1e3);s.events=[["Ignition","Liftoff","Roll program"],["Maximum Dynamic Pressure"],["Stage 1 Sep","Stage 2 Ignition"],["Fairing sep"],["Stage 2 shutdown"]],this.elapsedTime=0,this.maxFlightTime=600,s.currentStage=-1}angular.module("spaceyyz").component("flightDetails",{templateUrl:"src/flight/details.html",controller:e}),e.$inject=["$stateParams","flightFactory","$timeout","$scope"]}()},function(e,t){!function(){"use strict";function e(e,t,a){var i=this;this.spaceports={},e.getSpaceports().then(e=>{i.spaceports=e,t(()=>{a.$apply()})})}angular.module("spaceyyz").component("spaceportStatus",{templateUrl:"src/spaceports/spaceport-status.html",controller:e}),e.$inject=["spaceportFactory","$timeout","$scope"]}()},(e,t)=>{(()=>{"use strict";angular.module("spaceyyz").factory("spaceportFactory",function(){return{getSpaceports:()=>firebase.database().ref().child("spaceports").once("value").then(e=>{var t=e.val(),a=[],i=[];return Object.keys(t).forEach(e=>{var n=[];Object.keys(t[e]).forEach(a=>{var r=t[e][a];r.key=a,r.continent=e,n.push(r),i.push(r)}),a[e]=n}),a.all=i,a}),addSpaceport(e){var t=firebase.database().ref().child("spaceports/"+e.continent).push({name:e.name,country:e.country}).key;e.key=t},updateSpaceport(e){firebase.database().ref().child("spaceports/"+e.continent+"/"+e.key).set({name:e.name,country:e.country})},deleteSpaceport(e){firebase.database().ref().child("spaceports/"+e.continent+"/"+e.key).remove()}}})})()},function(e,t){!function(){"use strict";function e(e,t,a,i){var n=this;this.search_name="",this.newSpaceport={},this.spaceports={},this.successfullyCreated=!1,e.getSpaceports().then(e=>{n.spaceports=e,t(()=>{a.$apply()})}),this.onChange=(()=>{n.successfullyCreated=!1}),this.search=(e=>e.name.toLowerCase().includes(n.search_name.toLowerCase())),this.editSpaceport=(e=>{e.beingEdited=!0}),this.cancelEditSpaceport=(e=>{e.beingEdited=!1}),this.saveSpaceport=(t=>{t.beingEdited=!1,e.updateSpaceport(t);var a=n.spaceports.all.findIndex(e=>e.name===t.name);n.spaceports.all[a]=t}),this.createSpaceport=function(t){e.addSpaceport(t),n.spaceports.all.push(t),n.newSpaceport={},this.successfullyCreated=!0},this.modalInstance={},this.deleteSpaceport=(t=>{n.modalInstance=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",component:"confirmSpaceportDeleteModal",backdrop:"static",resolve:{spaceport:()=>t}}),n.modalInstance.result.then(t=>{e.deleteSpaceport(t),n.spaceports.all.splice(n.spaceports.all.indexOf(t),1)})})}angular.module("spaceyyz").component("configureSpaceport",{templateUrl:"src/spaceports/configure.html",controller:e}),e.$inject=["spaceportFactory","$timeout","$scope","$uibModal"]}()},function(e,t){!function(){"use strict";function e(e){this.spaceport=this.resolve.spaceport;var t=this;this.cancel=(()=>{t.modalInstance.dismiss("cancel")}),this.confirm=(()=>{t.modalInstance.close(t.spaceport)})}angular.module("spaceyyz").component("confirmSpaceportDeleteModal",{controller:e,templateUrl:"src/spaceports/config-confirm-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["spaceportFactory"]}()},function(e,t){!function(){"use strict";function e(){this.name="",this.isp={seaLevel:0,vacuum:0},this.thrust={seaLevel:0,vacuum:0},this.description=""}function t(t,a,i,n){var r=this;return this.engines={all:[]},this.newEngine=new e,this.addEngine=function(a){!a.name||a.isp.seaLevel<=0||a.isp.vacuum<=0||a.thrust.seaLevel<=0||a.thrust.vacuum<=0||!a.description||(t.addEngine(a),this.engines.all.push(a),this.newEngine=new e)},this.editEngine=(e=>{e.beingEdited=!0}),this.cancelEditEngine=(e=>{e.beingEdited=!1}),this.saveEngine=(e=>{if(e.beingEdited){e.beingEdited=!1,t.updateEngine(e);var a=r.engines.all.findIndex(t=>t.name===e.name);r.engines.all[a]=e}}),r.modalInstance={},this.deleteEngine=(e=>{r.modalInstance=n.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",component:"confirmEngineDeleteModal",backdrop:"static",resolve:{engine:()=>e}}),r.modalInstance.result.then(e=>{t.deleteEngine(e),r.engines.all.splice(r.engines.all.indexOf(e),1)})}),t.getEngines().then(e=>{r.engines.all=e,i(()=>{a.$apply()})}),this}angular.module("spaceyyz").component("researchEngine",{templateUrl:"src/research-development/engines.html",controller:t}),t.$inject=["engineFactory","$scope","$timeout","$uibModal"]}()},function(e,t){!function(){"use strict";function e(e,t,a){this.engine=this.resolve.engine;var i=this;this.cancel=(()=>{i.modalInstance.dismiss("cancel")}),this.confirm=(()=>{i.modalInstance.close(i.engine)})}angular.module("spaceyyz").component("confirmEngineDeleteModal",{controller:e,templateUrl:"src/research-development/config-confirm-modal.html",bindings:{resolve:"<",modalInstance:"<"}}),e.$inject=["$scope","$timeout","$stateParams"]}()}]);